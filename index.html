<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FENCEORA | Smart Electric Fence Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <script src="email-config.js"></script>
  <script src="email-sender.js"></script>
</head>
<body>

  <!-- Electric Spark Loading Animation -->
  <div class="loading-screen" id="loadingScreen">
    <div class="electric-fence-animation">
      <div class="lightning-bolts">
        <svg class="lightning lightning-1" viewBox="0 0 50 100">
          <path d="M 25 0 L 20 40 L 30 40 L 15 100 L 35 50 L 25 50 Z" fill="url(#lightning-gradient)" />
        </svg>
        <svg class="lightning lightning-2" viewBox="0 0 50 100">
          <path d="M 25 0 L 20 40 L 30 40 L 15 100 L 35 50 L 25 50 Z" fill="url(#lightning-gradient)" />
        </svg>
        <svg class="lightning lightning-3" viewBox="0 0 50 100">
          <path d="M 25 0 L 20 40 L 30 40 L 15 100 L 35 50 L 25 50 Z" fill="url(#lightning-gradient)" />
        </svg>
        <svg class="lightning lightning-4" viewBox="0 0 50 100">
          <path d="M 25 0 L 20 40 L 30 40 L 15 100 L 35 50 L 25 50 Z" fill="url(#lightning-gradient)" />
        </svg>
      </div>
      <!-- Final Thunder Flash Overlay -->
      <div class="thunder-flash" id="thunderFlash"></div>
      <!-- Sound Effects -->
      <audio id="electricHum" loop>
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/AAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AgYKDhIWGh4iJiouMjY6PkJGSk5SVlpeYmZqbnJ2en6ChoqOkpaanqKmqq6ytrq+wsbKztLW2t7i5uru8vb6/wMHCw8TFxsfIycrLzM3Oz9DR0tPU1dbX2Nna29zd3t/g4eLj5OXm5+jp6uvs7e7v8PHy8/T19vf4+fr7/P3+/w==" type="audio/wav">
      </audio>
      <audio id="thunderSound">
        <source src="data:audio/wav;base64,UklGRhQEAABXQVZFZm10IBAAAAABAAEAIlYAAESsAAABAAgAZGF0YfADAACQj46Ni4qJiIaFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PDs6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAA==" type="audio/wav">
      </audio>
      <div class="power-circle">
        <div class="circle-outer"></div>
        <div class="circle-middle"></div>
        <div class="circle-inner"></div>
        <i class="fas fa-bolt power-icon"></i>
      </div>
      <div class="loading-text">
        <h1 class="loading-title">FENCEORA</h1>
        <p class="loading-subtitle">Initializing Security System...</p>
        <div class="loading-bar">
          <div class="loading-progress" id="loadingProgress"></div>
        </div>
        <p class="loading-percentage" id="loadingPercentage">0%</p>
      </div>
    </div>
    
    <!-- SVG Gradient Definitions -->
    <svg width="0" height="0" class="svg-defs">
      <defs>
        <linearGradient id="lightning-gradient" x1="0%" y1="0%" x2="0%" y2="100%">
          <stop offset="0%" class="stop-color-1" />
          <stop offset="50%" class="stop-color-2" />
          <stop offset="100%" class="stop-color-3" />
        </linearGradient>
      </defs>
    </svg>
  </div>

  <div class="container" id="mainContainer">
    <!-- Critical Warning Overlay (Hidden by default) -->
    <div id="criticalWarningOverlay" class="critical-warning-overlay hidden">
      <div class="critical-warning-box">
        <div class="warning-icon-large">
          <i class="fas fa-exclamation-triangle"></i>
        </div>
        <h1 class="warning-title" id="warningTitle">‚ö†Ô∏è CRITICAL ALERT</h1>
        <p class="warning-message" id="warningMessage">Fence Current Detected!</p>
        <p class="warning-details" id="warningDetails">Time: 14:35:22 | Location: Perimeter Zone</p>
        <button class="warning-dismiss-btn" onclick="dismissWarning()">
          <i class="fas fa-times"></i> DISMISS
        </button>
      </div>
    </div>

    <header>
      <div class="esp32-section">
        <div class="esp32-label">ESP32 IP Address</div>
        <input type="text" id="esp32IpInput" class="esp32-ip-input" value="" placeholder="Enter IP Address">
        <div class="ip-button-group">
          <button id="saveIpBtn" class="save-ip-btn" title="Save IP">
            <i class="fas fa-check"></i>
          </button>
          <button id="editIpBtn" class="edit-ip-btn hidden" title="Edit IP">
            <i class="fas fa-edit"></i>
          </button>
        </div>
        <div class="connection-status">
          <div class="connection-dot"></div>
          <span id="connectionText">Editing...</span>
        </div>
      </div>
      
      <div class="logo">
        <div class="logo-icon">‚ö°</div>
        <h1>FENCEORA</h1>
      </div>
      
      <div class="header-right">
        <div class="header-menu">
          <button class="menu-item" id="aboutBtn" title="About & Help">
            <i class="fas fa-info-circle"></i>
            <span class="menu-text">About & Help</span>
          </button>
          <button class="menu-item" id="notificationBtn" title="Notifications">
            <i class="fas fa-bell"></i>
            <span class="menu-text">Notifications</span>
            <span class="notification-badge">3</span>
          </button>
          <button class="menu-item" id="settingsBtn" title="Settings">
            <i class="fas fa-cog"></i>
            <span class="menu-text">Settings</span>
          </button>
        </div>
      </div>
    </header>

    <div class="dashboard">

      <!-- Card 1: Capacitive Proximity Sensor - LARGE WITH WARNINGS -->
      <div class="card prox-card-large">
        <div class="card-header">
          <h2>Capacitive Proximity Sensor</h2>
          <i class="fas fa-hand-paper card-icon"></i>
        </div>
        <div class="sensor-value-large" id="proxValue">12.5 cm</div>
        <div class="status-badge status-normal" id="proxStatus">Normal Range</div>
        
        <!-- Warning Notifications -->
        <div class="warning-notifications" id="proxWarnings">
          <div class="warning-item warning-critical">
            <i class="fas fa-exclamation-circle"></i>
            <div class="warning-content">
              <span class="warning-text">Critical: Object too close! (5 cm)</span>
              <span class="warning-time">2 min ago</span>
            </div>
          </div>
          <div class="warning-item warning-alert">
            <i class="fas fa-exclamation-triangle"></i>
            <div class="warning-content">
              <span class="warning-text">Alert: Proximity threshold reached</span>
              <span class="warning-time">5 min ago</span>
            </div>
          </div>
          <div class="warning-item warning-info">
            <i class="fas fa-info-circle"></i>
            <div class="warning-content">
              <span class="warning-text">Info: Sensitivity adjusted</span>
              <span class="warning-time">10 min ago</span>
            </div>
          </div>
        </div>
        
        <div class="sensor-details">
          <div class="sensor-detail">
            <div class="detail-label">Detection Range</div>
            <div class="detail-value">0-50 cm</div>
          </div>
          <div class="sensor-detail">
            <div class="detail-label">Sensitivity</div>
            <div class="detail-value">High</div>
          </div>
          <div class="sensor-detail">
            <div class="detail-label">Last Update</div>
            <div class="detail-value" id="proxUpdate">2s ago</div>
          </div>
        </div>
      </div>

      <!-- Card 2: Temperature Sensor -->
      <div class="card">
        <div class="card-header">
          <h2>Temperature Sensor Readings</h2>
          <i class="fas fa-thermometer-half card-icon"></i>
        </div>
        <div class="sensor-value" id="tempValue">28.5¬∞C</div>
        <div class="status-badge status-normal" id="tempStatus">Optimal</div>
        <div class="sensor-details">
          <div class="sensor-detail">
            <div class="detail-label">Min Temp</div>
            <div class="detail-value">15¬∞C</div>
          </div>
          <div class="sensor-detail">
            <div class="detail-label">Max Temp</div>
            <div class="detail-value">40¬∞C</div>
          </div>
          <div class="sensor-detail">
            <div class="detail-label">Humidity</div>
            <div class="detail-value">65%</div>
          </div>
        </div>
      </div>

      <!-- Card 3: Ultrasonic + IR Detection Log -->
      <div class="card">
        <div class="card-header">
          <h2>Ultrasonic & IR Detection Log</h2>
          <i class="fas fa-ruler-combined card-icon"></i>
        </div>
        <p>Recent detection events:</p>
        <div class="log-container" id="detectLog">
          <div class="log-entry">
            <i class="fas fa-wave-square log-icon"></i>
            <span class="log-time">14:32:05</span>
            <span class="log-message">Ultrasonic: Object detected at 2.3m</span>
          </div>
          <div class="log-entry">
            <i class="fas fa-broadcast-tower log-icon"></i>
            <span class="log-time">14:25:18</span>
            <span class="log-message">IR Sensor: Motion detected in Zone B</span>
          </div>
          <div class="log-entry">
            <i class="fas fa-wave-square log-icon"></i>
            <span class="log-time">14:10:42</span>
            <span class="log-message">Ultrasonic: Object detected at 1.7m</span>
          </div>
          <div class="log-entry">
            <i class="fas fa-broadcast-tower log-icon"></i>
            <span class="log-time">13:58:33</span>
            <span class="log-message">IR Sensor: Motion detected in Zone A</span>
          </div>
        </div>
      </div>

      <!-- Card 4: RFID & Servo Motor Log -->
      <div class="card">
        <div class="card-header">
          <h2>RFID & Servo Motor Log</h2>
          <i class="fas fa-id-card card-icon"></i>
        </div>
        <p>Access control events:</p>
        <div class="log-container" id="rfidLog">
          <div class="log-entry">
            <i class="fas fa-id-card log-icon"></i>
            <span class="log-time">14:35:22</span>
            <span class="log-message">RFID: Access granted - User #4521</span>
          </div>
          <div class="log-entry">
            <i class="fas fa-cog log-icon"></i>
            <span class="log-time">14:30:10</span>
            <span class="log-message">Servo: Gate opened to 90¬∞</span>
          </div>
          <div class="log-entry">
            <i class="fas fa-id-card log-icon"></i>
            <span class="log-time">14:29:55</span>
            <span class="log-message">RFID: Card scanned - User #4521</span>
          </div>
          <div class="log-entry">
            <i class="fas fa-cog log-icon"></i>
            <span class="log-time">14:15:30</span>
            <span class="log-message">Servo: Gate closed to 0¬∞</span>
          </div>
        </div>
      </div>

      <!-- Card 5: RTC Time & Solar Power -->
      <div class="card">
        <div class="card-header">
          <h2>RTC Time & Solar Power</h2>
          <i class="fas fa-clock card-icon"></i>
        </div>
        <div class="sensor-value" id="rtcTime">14:45:32</div>
        <div class="detail-value" id="rtcDate">2023-10-15</div>
        
        <div class="power-status">
          <div class="battery-container">
            <div class="battery">
              <div class="battery-level" id="batteryLevel"></div>
            </div>
            <div>
              <div class="solar-text" id="batteryText">Battery: 85%</div>
              <div class="detail-label">Solar Input: 18.7V</div>
            </div>
          </div>
          <div class="solar-container">
            <i class="fas fa-solar-panel solar-icon"></i>
            <div>
              <div class="solar-text">Active Supply</div>
              <div class="detail-label">5.2A / 98W</div>
            </div>
          </div>
        </div>
        
        <div class="extra-info">
          <p>System Uptime: <span id="uptime">5 days, 12:23:15</span></p>
          <p>Last Sync: <span id="lastSync">2023-10-15 14:30:00</span></p>
        </div>
      </div>

      <!-- Card 6: MPU6050 Motion Sensor - SPLIT INTO TWO BOXES -->
      <div class="card mpu-card-large">
        <div class="card-header">
          <h2>MPU 6050 Motion Sensor</h2>
          <i class="fas fa-compass card-icon"></i>
        </div>
        <div class="mpu-status-indicator">
          <div class="mpu-status-badge" id="mpuStatus">
            <i class="fas fa-shield-alt"></i>
            <span id="mpuStatusText">Stable</span>
          </div>
          <div class="mpu-alert-badge" id="mpuAlert">
            <i class="fas fa-exclamation-triangle"></i>
            <span>Motion Detected!</span>
          </div>
        </div>
        
        <div class="mpu-split-grid">
          <!-- Left Box: Gyroscope -->
          <div class="mpu-box gyro-box">
            <h3><i class="fas fa-sync-alt"></i> Gyroscope</h3>
            <div class="mpu-values">
              <div class="mpu-axis">
                <span class="axis-label">X:</span>
                <span class="axis-value" id="gyroX">0.00 ¬∞/s</span>
              </div>
              <div class="mpu-axis">
                <span class="axis-label">Y:</span>
                <span class="axis-value" id="gyroY">0.00 ¬∞/s</span>
              </div>
              <div class="mpu-axis">
                <span class="axis-label">Z:</span>
                <span class="axis-value" id="gyroZ">0.00 ¬∞/s</span>
              </div>
            </div>
          </div>
          
          <!-- Right Box: Accelerometer -->
          <div class="mpu-box accel-box">
            <h3><i class="fas fa-tachometer-alt"></i> Accelerometer</h3>
            <div class="mpu-values">
              <div class="mpu-axis">
                <span class="axis-label">X:</span>
                <span class="axis-value" id="accelX">0.00 m/s¬≤</span>
              </div>
              <div class="mpu-axis">
                <span class="axis-label">Y:</span>
                <span class="axis-value" id="accelY">0.00 m/s¬≤</span>
              </div>
              <div class="mpu-axis">
                <span class="axis-label">Z:</span>
                <span class="axis-value" id="accelZ">9.81 m/s¬≤</span>
              </div>
            </div>
          </div>
        </div>
        
        <div class="mpu-metrics">
          <div class="mpu-metric">
            <i class="fas fa-thermometer-half"></i>
            <span>Temperature:</span>
            <strong id="mpuTemp">25.4¬∞C</strong>
          </div>
          <div class="mpu-metric">
            <i class="fas fa-wave-square"></i>
            <span>Vibration Level:</span>
            <strong id="vibrationLevel">Low</strong>
          </div>
        </div>
      </div>

      <!-- Graph Card: Real-Time Sensor Data - FULL WIDTH -->
      <div class="card graph-card-full">
        <div class="card-header">
          <h2>Real-Time Sensor Data Graph</h2>
          <i class="fas fa-chart-line card-icon"></i>
        </div>
        <div class="graph-container">
          <canvas id="sensorChart"></canvas>
        </div>
      </div>

    </div>

    <div class="footer">
      <div class="footer-content">
        <div class="footer-section">
          <p class="footer-text">PROJECT DONE BY H^4 HYPERS</p>
          <p class="footer-subtext">¬© 2025 FENCEORA | Smart Electric Fence Node System</p>
        </div>
        <div class="footer-section">
          <p class="footer-guided-title">GUIDED BY:</p>
          <p class="footer-guided-name">DR.T SENTHIL KUMAR</p>
          <p class="footer-guided-name">DR.G.SANMUGAVADIVEL</p>
        </div>
      </div>
    </div>
  </div>

  <!-- About & Help Modal -->
  <div id="aboutModal" class="modal">
    <div class="modal-content modal-large">
      <div class="modal-header">
        <h2><i class="fas fa-info-circle"></i> About & Help</h2>
        <button class="modal-close" id="closeAbout">&times;</button>
      </div>
      <div class="modal-body">
        <div class="about-tabs">
          <button class="tab-btn active" data-tab="about">About FENCEORA</button>
          <button class="tab-btn" data-tab="help">Help & Guidance</button>
          <button class="tab-btn" data-tab="code">Code</button>
        </div>

        <div id="about-tab" class="tab-content active">
          <h3>About FENCEORA</h3>
          <p><strong>FENCEORA</strong> is an advanced Smart Electric Fence Monitoring and Control System powered by ESP32 technology.</p>
          
          <h4>Key Features:</h4>
          <ul>
            <li><strong>Real-Time Monitoring:</strong> Track all sensors and system status in real-time</li>
            <li><strong>Multiple Sensors:</strong> Capacitive proximity, temperature, ultrasonic, IR, and RFID integration</li>
            <li><strong>Solar Powered:</strong> Eco-friendly power management with battery backup</li>
            <li><strong>Access Control:</strong> RFID-based authentication and servo motor control</li>
            <li><strong>Remote Management:</strong> Control and monitor from anywhere via web interface</li>
            <li><strong>Event Logging:</strong> Comprehensive logging of all detection and access events</li>
          </ul>

          <h4>System Specifications:</h4>
          <div class="specs-grid-modal">
            <div class="spec-item-modal">
              <i class="fas fa-microchip"></i>
              <strong>Controller:</strong> ESP32
            </div>
            <div class="spec-item-modal">
              <i class="fas fa-solar-panel"></i>
              <strong>Power:</strong> Solar + Battery
            </div>
            <div class="spec-item-modal">
              <i class="fas fa-wifi"></i>
              <strong>Connectivity:</strong> WiFi
            </div>
            <div class="spec-item-modal">
              <i class="fas fa-sensor"></i>
              <strong>Sensors:</strong> 5+ Types
            </div>
          </div>

          <h4>Documentation:</h4>
          <div class="download-section">
            <a href="imagevideos/Fenceora.pdf" download="Fenceora_Documentation.pdf" class="btn-download-pdf">
              <i class="fas fa-file-pdf"></i> Download PDF Documentation
            </a>
          </div>
        </div>

        <div id="help-tab" class="tab-content">
          <h3>Help & Guidance</h3>
          
          <h4>Getting Started:</h4>
          <ol>
            <li><strong>Connect to ESP32:</strong> Enter your ESP32's IP address in the left corner</li>
            <li><strong>Monitor Sensors:</strong> View real-time data from all connected sensors on the dashboard</li>
            <li><strong>Check Logs:</strong> Review detection and access control events in the log sections</li>
            <li><strong>System Status:</strong> Monitor battery levels and solar power input</li>
          </ol>

          <h4>Common Tasks:</h4>
          <div class="help-task-modal">
            <h5><i class="fas fa-edit"></i> Changing IP Address:</h5>
            <p>Enter IP in the field ‚Üí Click save (checkmark) or press Enter</p>
          </div>

          <div class="help-task-modal">
            <h5><i class="fas fa-eye"></i> Reading Sensor Data:</h5>
            <p>Each card displays the current sensor value, status, and additional details. Color-coded badges indicate system health.</p>
          </div>

          <div class="help-task-modal">
            <h5><i class="fas fa-list"></i> Understanding Logs:</h5>
            <p>Log entries show timestamp, sensor type, and event details. Most recent events appear at the top.</p>
          </div>

          <h4>Troubleshooting:</h4>
          <ul>
            <li><strong>Can't connect to ESP32:</strong> Verify IP address and ensure ESP32 is powered on and connected to WiFi</li>
            <li><strong>No sensor updates:</strong> Check ESP32 connection and refresh the page</li>
            <li><strong>Incorrect time:</strong> System uses your local time zone automatically</li>
          </ul>

          <div class="help-contact">
            <h4>Need More Help?</h4>
            <p><strong>Development Team:</strong> H^4 HYPERS</p>
            <p><i class="fas fa-envelope"></i> Email: fenceora.h4@gmail.com</p>
          </div>
        </div>

        <div id="code-tab" class="tab-content">
          <h3>Scilab Experiment Codes</h3>
          <p>Copy and paste the following Scilab codes for your experiments:</p>

          <div class="code-section">
            <h4>Experiment 5: One Dimensional Wave Equation</h4>
            <div class="code-block">
              <pre><code>clear;
clc;
n=1:2:100;
l=5;//distance =5
x = 3; //in between 0 to l
k = 2; //spring constant
t = 0.5;//t=0.5 seconds
a=1;//constant =1
sinx = sin(n*%pi*x/l);
cosx = cos(n*%pi*a*t/l);
I = sinx.*cosx;
N = n.^3;
I = I./N
z = sum(I);
y =((8*k*(l^2))/(%pi^3))*z//Final Solution
disp("Solution of one dimensional wave equation is : y(3,0.5)=",y)</code></pre>
            </div>
          </div>

          <div class="code-section">
            <h4>Experiment 6: One Dimensional Heat Equation</h4>
            <div class="code-block">
              <pre><code>clear;
clc;
l=5;//length of the rod=5
x=3;//in between 0 to 5
t=0.5;//time = 0.5 seconds
alpha=1;//constant=1
//cosx = cos(n*%pi*x/l);
//expt = -(alpha^2)(n^2)(%pi^2)*t/(l^2);
//temp = -4*(l^2)/((%pi^2))
u=(l^2)/6;
for n=2:2:100
 u= u+(-4*(l^2)/((%pi^2)(n^2)))*cos(n%pi*x/l)exp(-(alpha^2)(n^2)*(%pi^2)*t/(l^2));
end
 disp('One Dimensional Heat Equation Final Solution u(3,0.5)=',u)</code></pre>
            </div>
          </div>

          <div class="code-section">
            <h4>Experiment 7: Z-Transform of Finite Discrete Sequence</h4>
            <div class="code-block">
              <pre><code>clear all;
clc;
x=[1,0,3,-1,2];
//input discrete sequence
z=poly(0,'z');
disp('z-transform of a finite discrete sequence X(z)=')
for n=0:length(x)-1
 XZ(n+1)=x(n+1)*(1/z)^n;
 disp(XZ(n+1))
end
//result</code></pre>
            </div>
          </div>

          <div class="code-section">
            <h4>Experiment 8: Partial Fraction Expansion</h4>
            <div class="code-block">
              <pre><code>clear;
clc;
z = poly(0,'z');
X = pfss(1/(1-3.5*z^-1+3*z^-2));
XZ1 = syslin('d',X(1))
XZ2 = syslin('d',X(2))
disp("Partial Fraction Result is")
disp('X1(z)=',XZ1)
disp('X2(z)=',XZ2)</code></pre>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Notification Modal -->
  <div id="notificationModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2><i class="fas fa-bell"></i> Notifications</h2>
        <button class="modal-close" id="closeNotification">&times;</button>
      </div>
      <div class="modal-body">
        <div class="notification-item unread">
          <div class="notification-icon alert">
            <i class="fas fa-exclamation-triangle"></i>
          </div>
          <div class="notification-content">
            <h4>Proximity Alert</h4>
            <p>Object detected too close at Zone A</p>
            <span class="notification-time">2 minutes ago</span>
          </div>
        </div>
        <div class="notification-item unread">
          <div class="notification-icon warning">
            <i class="fas fa-temperature-high"></i>
          </div>
          <div class="notification-content">
            <h4>Temperature Warning</h4>
            <p>Temperature elevated to 32¬∞C</p>
            <span class="notification-time">15 minutes ago</span>
          </div>
        </div>
        <div class="notification-item unread">
          <div class="notification-icon success">
            <i class="fas fa-check-circle"></i>
          </div>
          <div class="notification-content">
            <h4>System Update</h4>
            <p>All sensors functioning normally</p>
            <span class="notification-time">1 hour ago</span>
          </div>
        </div>
        <div class="notification-item">
          <div class="notification-icon info">
            <i class="fas fa-info-circle"></i>
          </div>
          <div class="notification-content">
            <h4>Battery Status</h4>
            <p>Battery charged to 85%</p>
            <span class="notification-time">3 hours ago</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settingsModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2><i class="fas fa-cog"></i> Settings</h2>
        <button class="modal-close" id="closeSettings">&times;</button>
      </div>
      <div class="modal-body">
        <div class="settings-section">
          <h3>Display Settings</h3>
          <div class="setting-item">
            <label for="refreshRate">Data Refresh Rate:</label>
            <select id="refreshRate">
              <option value="3000">3 seconds</option>
              <option value="5000" selected>5 seconds</option>
              <option value="10000">10 seconds</option>
            </select>
          </div>
          <div class="setting-item">
            <label for="theme">Theme:</label>
            <select id="theme">
              <option value="dark" selected>Dark Mode</option>
              <option value="light">Light Mode</option>
            </select>
          </div>
        </div>

        <div class="settings-section">
          <h3>Notification Settings</h3>
          <div class="setting-item checkbox">
            <input type="checkbox" id="enableNotifications" checked>
            <label for="enableNotifications">Enable Notifications</label>
          </div>
          <div class="setting-item checkbox">
            <input type="checkbox" id="soundAlerts" checked>
            <label for="soundAlerts">Sound Alerts</label>
          </div>
          <div class="setting-item checkbox">
            <input type="checkbox" id="emailNotifications" checked>
            <label for="emailNotifications">Email Notifications</label>
          </div>
          
          <!-- Email Test Section -->
          <div class="email-test-section" id="emailTestSection">
            <div class="email-test-header">
              <i class="fas fa-envelope-open-text"></i>
              <h4>Test Email Notification</h4>
            </div>
            <p class="email-test-description">Test the email notification system independently. Click the button below to send a test email to all receivers. No ESP32 connection required! Available every 30 seconds.</p>
            <button class="btn-test-email" id="testEmailBtn">
              <i class="fas fa-paper-plane"></i>
              <span id="testEmailText">Send Test Email</span>
            </button>
            <div class="email-test-timer" id="emailTestTimer">
              <i class="fas fa-clock"></i>
              <span>Next test available in: <strong id="timerCountdown">30</strong> seconds</span>
            </div>
            <div class="email-test-status" id="emailTestStatus">
              <i class="fas fa-check-circle"></i>
              <span id="emailStatusText">Test email sent successfully!</span>
            </div>
          </div>
        </div>

        <div class="settings-section">
          <h3>System Settings</h3>
          <div class="setting-item">
            <label for="timeFormat">Time Format:</label>
            <select id="timeFormat">
              <option value="12">12 Hour</option>
              <option value="24" selected>24 Hour</option>
            </select>
          </div>
          <div class="setting-item">
            <label for="tempUnit">Temperature Unit:</label>
            <select id="tempUnit">
              <option value="C" selected>Celsius (¬∞C)</option>
              <option value="F">Fahrenheit (¬∞F)</option>
            </select>
          </div>
          <div class="setting-item">
            <label for="language">Language:</label>
            <select id="language">
              <option value="en" selected>English</option>
              <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)</option>
            </select>
          </div>
        </div>

        <div class="settings-actions">
          <button class="btn-save"><i class="fas fa-save"></i> Save Settings</button>
          <button class="btn-reset"><i class="fas fa-undo"></i> Reset to Default</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Floating Action Button (Right Side) -->
  <div class="floating-actions">
    <button class="floating-btn feedback-btn" id="feedbackBtn" title="Send Feedback">
      <div class="feedback-emoji-container">
        <!-- Yellow Smiley Face -->
        <div class="emoji-circle">
          <div class="emoji-face-inner">
            <!-- Eyes -->
            <div class="emoji-eyes">
              <div class="emoji-eye left-eye">
                <div class="emoji-pupil"></div>
                <div class="eye-shine"></div>
              </div>
              <div class="emoji-eye right-eye">
                <div class="emoji-pupil"></div>
                <div class="eye-shine"></div>
              </div>
            </div>
            <!-- Big Smile -->
            <div class="emoji-big-smile">
              <div class="smile-inner"></div>
            </div>
          </div>
        </div>
        <!-- Speech Bubble -->
        <div class="speech-bubble">
          <div class="bubble-lines">
            <span class="bubble-line line-1"></span>
            <span class="bubble-line line-2"></span>
            <span class="bubble-line line-3"></span>
          </div>
          <div class="bubble-tail"></div>
        </div>
      </div>
    </button>
  </div>

  <!-- Feedback Modal -->
  <div class="modal" id="feedbackModal">
    <div class="modal-content feedback-modal-content">
      <div class="modal-header">
        <h2><i class="fas fa-comment-dots"></i> Send Feedback</h2>
        <span class="close-modal" id="closeFeedbackModal">&times;</span>
      </div>
      <div class="modal-body">
        <p class="feedback-description">We'd love to hear from you! Share your thoughts, suggestions, or report issues.</p>
        <form id="feedbackForm">
          <div class="form-group">
            <label for="feedbackName">Your Name</label>
            <input type="text" id="feedbackName" placeholder="Enter your name" required>
          </div>
          <div class="form-group">
            <label for="feedbackEmail">Your Email</label>
            <input type="email" id="feedbackEmail" placeholder="your.email@example.com" required>
          </div>
          <div class="form-group">
            <label for="feedbackType">Feedback Type</label>
            <select id="feedbackType" required>
              <option value="">Select type...</option>
              <option value="Suggestion">üí° Suggestion</option>
              <option value="Bug Report">üêõ Bug Report</option>
              <option value="Feature Request">‚ú® Feature Request</option>
              <option value="Compliment">üëç Compliment</option>
              <option value="Other">üìù Other</option>
            </select>
          </div>
          <div class="form-group">
            <label for="feedbackMessage">Message</label>
            <textarea id="feedbackMessage" rows="6" placeholder="Tell us what's on your mind..." required></textarea>
          </div>
          <div class="feedback-actions">
            <button type="submit" class="btn-submit-feedback">
              <i class="fas fa-paper-plane"></i> Send Feedback
            </button>
            <button type="button" class="btn-cancel-feedback" id="cancelFeedback">
              Cancel
            </button>
          </div>
        </form>
        <div class="feedback-status" id="feedbackStatus">
          <i class="fas fa-check-circle"></i>
          <span id="feedbackStatusText">Feedback sent successfully!</span>
        </div>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
