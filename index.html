<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FENCEORA | Smart Electric Fence Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <script src="email-config.js"></script>
  <script src="email-sender.js"></script>
</head>
<body>

  <!-- Electric Spark Loading Animation -->
  <div class="loading-screen" id="loadingScreen">
    <div class="electric-fence-animation">
      <div class="lightning-bolts">
        <svg class="lightning lightning-1" viewBox="0 0 50 100">
          <path d="M 25 0 L 20 40 L 30 40 L 15 100 L 35 50 L 25 50 Z" fill="url(#lightning-gradient)" />
        </svg>
        <svg class="lightning lightning-2" viewBox="0 0 50 100">
          <path d="M 25 0 L 20 40 L 30 40 L 15 100 L 35 50 L 25 50 Z" fill="url(#lightning-gradient)" />
        </svg>
        <svg class="lightning lightning-3" viewBox="0 0 50 100">
          <path d="M 25 0 L 20 40 L 30 40 L 15 100 L 35 50 L 25 50 Z" fill="url(#lightning-gradient)" />
        </svg>
        <svg class="lightning lightning-4" viewBox="0 0 50 100">
          <path d="M 25 0 L 20 40 L 30 40 L 15 100 L 35 50 L 25 50 Z" fill="url(#lightning-gradient)" />
        </svg>
      </div>
      <!-- Final Thunder Flash Overlay -->
      <div class="thunder-flash" id="thunderFlash"></div>
      <!-- Sound Effects -->
      <audio id="electricHum" loop>
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/AAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AgYKDhIWGh4iJiouMjY6PkJGSk5SVlpeYmZqbnJ2en6ChoqOkpaanqKmqq6ytrq+wsbKztLW2t7i5uru8vb6/wMHCw8TFxsfIycrLzM3Oz9DR0tPU1dbX2Nna29zd3t/g4eLj5OXm5+jp6uvs7e7v8PHy8/T19vf4+fr7/P3+/w==" type="audio/wav">
      </audio>
      <audio id="thunderSound">
        <source src="data:audio/wav;base64,UklGRhQEAABXQVZFZm10IBAAAAABAAEAIlYAAESsAAABAAgAZGF0YfADAACQj46Ni4qJiIaFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PDs6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAA==" type="audio/wav">
      </audio>
      <div class="power-circle">
        <div class="circle-outer"></div>
        <div class="circle-middle"></div>
        <div class="circle-inner"></div>
        <i class="fas fa-bolt power-icon"></i>
      </div>
      <div class="loading-text">
        <h1 class="loading-title">FENCEORA</h1>
        <p class="loading-subtitle">Initializing Security System...</p>
        <div class="loading-bar">
          <div class="loading-progress" id="loadingProgress"></div>
        </div>
        <p class="loading-percentage" id="loadingPercentage">0%</p>
      </div>
    </div>
    
    <!-- SVG Gradient Definitions -->
    <svg width="0" height="0" class="svg-defs">
      <defs>
        <linearGradient id="lightning-gradient" x1="0%" y1="0%" x2="0%" y2="100%">
          <stop offset="0%" class="stop-color-1" />
          <stop offset="50%" class="stop-color-2" />
          <stop offset="100%" class="stop-color-3" />
        </linearGradient>
      </defs>
    </svg>
  </div>

  <div class="container" id="mainContainer">
    <!-- Critical Warning Overlay (Hidden by default) -->
    <div id="criticalWarningOverlay" class="critical-warning-overlay hidden">
      <div class="critical-warning-box">
        <div class="warning-icon-large">
          <i class="fas fa-exclamation-triangle"></i>
        </div>
        <h1 class="warning-title" id="warningTitle">⚠️ CRITICAL ALERT</h1>
        <p class="warning-message" id="warningMessage">Fence Current Detected!</p>
        <p class="warning-details" id="warningDetails">Time: 14:35:22 | Location: Perimeter Zone</p>
        <button class="warning-dismiss-btn" onclick="dismissWarning()">
          <i class="fas fa-times"></i> DISMISS
        </button>
      </div>
    </div>

    <header>
      <div class="esp32-section">
        <div class="esp32-label">ESP32 IP Address</div>
        <input type="text" id="esp32IpInput" class="esp32-ip-input" value="" placeholder="Enter IP Address">
        <div class="ip-button-group">
          <button id="saveIpBtn" class="save-ip-btn" title="Save IP">
            <i class="fas fa-check"></i>
          </button>
          <button id="editIpBtn" class="edit-ip-btn hidden" title="Edit IP">
            <i class="fas fa-edit"></i>
          </button>
        </div>
        <div class="connection-status">
          <div class="connection-dot"></div>
          <span id="connectionText">Editing...</span>
        </div>
      </div>
      
      <div class="logo">
        <div class="logo-icon">⚡</div>
        <h1>FENCEORA</h1>
      </div>
      
      <div class="header-right">
        <div class="header-menu">
          <button class="menu-item" id="aboutBtn" title="About & Help">
            <i class="fas fa-info-circle"></i>
            <span class="menu-text">About & Help</span>
          </button>
          <button class="menu-item" id="notificationBtn" title="Notifications">
            <i class="fas fa-bell"></i>
            <span class="menu-text">Notifications</span>
            <span class="notification-badge">3</span>
          </button>
          <button class="menu-item" id="settingsBtn" title="Settings">
            <i class="fas fa-cog"></i>
            <span class="menu-text">Settings</span>
          </button>
        </div>
      </div>
    </header>

    <div class="dashboard">

      <!-- Card 1: Capacitive Proximity Sensor - LARGE WITH WARNINGS -->
      <div class="card prox-card-large">
        <div class="card-header">
          <h2>Capacitive Proximity Sensor</h2>
          <i class="fas fa-hand-paper card-icon"></i>
        </div>
        <div class="sensor-value-large" id="proxValue">12.5 cm</div>
        <div class="status-badge status-normal" id="proxStatus">Normal Range</div>
        
        <!-- Warning Notifications -->
        <div class="warning-notifications" id="proxWarnings">
          <div class="warning-item warning-critical">
            <i class="fas fa-exclamation-circle"></i>
            <div class="warning-content">
              <span class="warning-text">Critical: Object too close! (5 cm)</span>
              <span class="warning-time">2 min ago</span>
            </div>
          </div>
          <div class="warning-item warning-alert">
            <i class="fas fa-exclamation-triangle"></i>
            <div class="warning-content">
              <span class="warning-text">Alert: Proximity threshold reached</span>
              <span class="warning-time">5 min ago</span>
            </div>
          </div>
          <div class="warning-item warning-info">
            <i class="fas fa-info-circle"></i>
            <div class="warning-content">
              <span class="warning-text">Info: Sensitivity adjusted</span>
              <span class="warning-time">10 min ago</span>
            </div>
          </div>
        </div>
        
        <div class="sensor-details">
          <div class="sensor-detail">
            <div class="detail-label">Detection Range</div>
            <div class="detail-value">0-50 cm</div>
          </div>
          <div class="sensor-detail">
            <div class="detail-label">Sensitivity</div>
            <div class="detail-value">High</div>
          </div>
          <div class="sensor-detail">
            <div class="detail-label">Last Update</div>
            <div class="detail-value" id="proxUpdate">2s ago</div>
          </div>
        </div>
      </div>

      <!-- Card 2: Temperature Sensor -->
      <div class="card">
        <div class="card-header">
          <h2>Temperature Sensor Readings</h2>
          <i class="fas fa-thermometer-half card-icon"></i>
        </div>
        <div class="sensor-value" id="tempValue">28.5°C</div>
        <div class="status-badge status-normal" id="tempStatus">Optimal</div>
        <div class="sensor-details">
          <div class="sensor-detail">
            <div class="detail-label">Min Temp</div>
            <div class="detail-value">15°C</div>
          </div>
          <div class="sensor-detail">
            <div class="detail-label">Max Temp</div>
            <div class="detail-value">40°C</div>
          </div>
          <div class="sensor-detail">
            <div class="detail-label">Humidity</div>
            <div class="detail-value">65%</div>
          </div>
        </div>
      </div>

      <!-- Card 3: Ultrasonic + IR Detection Log -->
      <div class="card">
        <div class="card-header">
          <h2>Ultrasonic & IR Detection Log</h2>
          <i class="fas fa-ruler-combined card-icon"></i>
        </div>
        <p>Recent detection events:</p>
        <div class="log-container" id="detectLog">
          <div class="log-entry">
            <i class="fas fa-wave-square log-icon"></i>
            <span class="log-time">14:32:05</span>
            <span class="log-message">Ultrasonic: Object detected at 2.3m</span>
          </div>
          <div class="log-entry">
            <i class="fas fa-broadcast-tower log-icon"></i>
            <span class="log-time">14:25:18</span>
            <span class="log-message">IR Sensor: Motion detected in Zone B</span>
          </div>
          <div class="log-entry">
            <i class="fas fa-wave-square log-icon"></i>
            <span class="log-time">14:10:42</span>
            <span class="log-message">Ultrasonic: Object detected at 1.7m</span>
          </div>
          <div class="log-entry">
            <i class="fas fa-broadcast-tower log-icon"></i>
            <span class="log-time">13:58:33</span>
            <span class="log-message">IR Sensor: Motion detected in Zone A</span>
          </div>
        </div>
      </div>

      <!-- Card 4: RFID & Servo Motor Log -->
      <div class="card">
        <div class="card-header">
          <h2>RFID & Servo Motor Log</h2>
          <i class="fas fa-id-card card-icon"></i>
        </div>
        <p>Access control events:</p>
        <div class="log-container" id="rfidLog">
          <div class="log-entry">
            <i class="fas fa-id-card log-icon"></i>
            <span class="log-time">14:35:22</span>
            <span class="log-message">RFID: Access granted - User #4521</span>
          </div>
          <div class="log-entry">
            <i class="fas fa-cog log-icon"></i>
            <span class="log-time">14:30:10</span>
            <span class="log-message">Servo: Gate opened to 90°</span>
          </div>
          <div class="log-entry">
            <i class="fas fa-id-card log-icon"></i>
            <span class="log-time">14:29:55</span>
            <span class="log-message">RFID: Card scanned - User #4521</span>
          </div>
          <div class="log-entry">
            <i class="fas fa-cog log-icon"></i>
            <span class="log-time">14:15:30</span>
            <span class="log-message">Servo: Gate closed to 0°</span>
          </div>
        </div>
      </div>

      <!-- Card 5: RTC Time & Solar Power -->
      <div class="card">
        <div class="card-header">
          <h2>RTC Time & Solar Power</h2>
          <i class="fas fa-clock card-icon"></i>
        </div>
        <div class="sensor-value" id="rtcTime">14:45:32</div>
        <div class="detail-value" id="rtcDate">2023-10-15</div>
        
        <div class="power-status">
          <div class="battery-container">
            <div class="battery">
              <div class="battery-level" id="batteryLevel"></div>
            </div>
            <div>
              <div class="solar-text" id="batteryText">Battery: 85%</div>
              <div class="detail-label">Solar Input: 18.7V</div>
            </div>
          </div>
          <div class="solar-container">
            <i class="fas fa-solar-panel solar-icon"></i>
            <div>
              <div class="solar-text">Active Supply</div>
              <div class="detail-label">5.2A / 98W</div>
            </div>
          </div>
        </div>
        
        <div class="extra-info">
          <p>System Uptime: <span id="uptime">5 days, 12:23:15</span></p>
          <p>Last Sync: <span id="lastSync">2023-10-15 14:30:00</span></p>
        </div>
      </div>

      <!-- Card 6: MPU6050 Motion Sensor - SPLIT INTO TWO BOXES -->
      <div class="card mpu-card-large">
        <div class="card-header">
          <h2>MPU 6050 Motion Sensor</h2>
          <i class="fas fa-compass card-icon"></i>
        </div>
        <div class="mpu-status-indicator">
          <div class="mpu-status-badge" id="mpuStatus">
            <i class="fas fa-shield-alt"></i>
            <span id="mpuStatusText">Stable</span>
          </div>
          <div class="mpu-alert-badge" id="mpuAlert">
            <i class="fas fa-exclamation-triangle"></i>
            <span>Motion Detected!</span>
          </div>
        </div>
        
        <div class="mpu-split-grid">
          <!-- Left Box: Gyroscope -->
          <div class="mpu-box gyro-box">
            <h3><i class="fas fa-sync-alt"></i> Gyroscope</h3>
            <div class="mpu-values">
              <div class="mpu-axis">
                <span class="axis-label">X:</span>
                <span class="axis-value" id="gyroX">0.00 °/s</span>
              </div>
              <div class="mpu-axis">
                <span class="axis-label">Y:</span>
                <span class="axis-value" id="gyroY">0.00 °/s</span>
              </div>
              <div class="mpu-axis">
                <span class="axis-label">Z:</span>
                <span class="axis-value" id="gyroZ">0.00 °/s</span>
              </div>
            </div>
          </div>
          
          <!-- Right Box: Accelerometer -->
          <div class="mpu-box accel-box">
            <h3><i class="fas fa-tachometer-alt"></i> Accelerometer</h3>
            <div class="mpu-values">
              <div class="mpu-axis">
                <span class="axis-label">X:</span>
                <span class="axis-value" id="accelX">0.00 m/s²</span>
              </div>
              <div class="mpu-axis">
                <span class="axis-label">Y:</span>
                <span class="axis-value" id="accelY">0.00 m/s²</span>
              </div>
              <div class="mpu-axis">
                <span class="axis-label">Z:</span>
                <span class="axis-value" id="accelZ">9.81 m/s²</span>
              </div>
            </div>
          </div>
        </div>
        
        <div class="mpu-metrics">
          <div class="mpu-metric">
            <i class="fas fa-thermometer-half"></i>
            <span>Temperature:</span>
            <strong id="mpuTemp">25.4°C</strong>
          </div>
          <div class="mpu-metric">
            <i class="fas fa-wave-square"></i>
            <span>Vibration Level:</span>
            <strong id="vibrationLevel">Low</strong>
          </div>
        </div>
      </div>

      <!-- Graph Card: Real-Time Sensor Data - FULL WIDTH -->
      <div class="card graph-card-full">
        <div class="card-header">
          <h2>Real-Time Sensor Data Graph</h2>
          <i class="fas fa-chart-line card-icon"></i>
        </div>
        <div class="graph-container">
          <canvas id="sensorChart"></canvas>
        </div>
      </div>

    </div>

    <div class="footer">
      <div class="footer-content">
        <div class="footer-section">
          <p class="footer-text">PROJECT DONE BY H^4 HYPERS</p>
          <p class="footer-subtext">© 2025 FENCEORA | Smart Electric Fence Node System</p>
        </div>
        <div class="footer-section">
          <p class="footer-guided-title">GUIDED BY:</p>
          <p class="footer-guided-name">DR.T SENTHIL KUMAR</p>
          <p class="footer-guided-name">DR.G.SANMUGAVADIVEL</p>
        </div>
      </div>
    </div>
  </div>

  <!-- About & Help Modal -->
  <div id="aboutModal" class="modal">
    <div class="modal-content modal-large">
      <div class="modal-header">
        <h2><i class="fas fa-info-circle"></i> About & Help</h2>
        <button class="modal-close" id="closeAbout">&times;</button>
      </div>
      <div class="modal-body">
        <div class="about-tabs">
          <button class="tab-btn active" data-tab="about">About FENCEORA</button>
          <button class="tab-btn" data-tab="help">Help & Guidance</button>
          <button class="tab-btn" data-tab="code">Code</button>
          <button class="tab-btn" data-tab="scilab">Scilab Experiments</button>
        </div>

        <div id="about-tab" class="tab-content active">
          <h3>About FENCEORA</h3>
          <p><strong>FENCEORA</strong> is an advanced Smart Electric Fence Monitoring and Control System powered by ESP32 technology.</p>
          
          <h4>Key Features:</h4>
          <ul>
            <li><strong>Real-Time Monitoring:</strong> Track all sensors and system status in real-time</li>
            <li><strong>Multiple Sensors:</strong> Capacitive proximity, temperature, ultrasonic, IR, and RFID integration</li>
            <li><strong>Solar Powered:</strong> Eco-friendly power management with battery backup</li>
            <li><strong>Access Control:</strong> RFID-based authentication and servo motor control</li>
            <li><strong>Remote Management:</strong> Control and monitor from anywhere via web interface</li>
            <li><strong>Event Logging:</strong> Comprehensive logging of all detection and access events</li>
          </ul>

          <h4>System Specifications:</h4>
          <div class="specs-grid-modal">
            <div class="spec-item-modal">
              <i class="fas fa-microchip"></i>
              <strong>Controller:</strong> ESP32
            </div>
            <div class="spec-item-modal">
              <i class="fas fa-solar-panel"></i>
              <strong>Power:</strong> Solar + Battery
            </div>
            <div class="spec-item-modal">
              <i class="fas fa-wifi"></i>
              <strong>Connectivity:</strong> WiFi
            </div>
            <div class="spec-item-modal">
              <i class="fas fa-sensor"></i>
              <strong>Sensors:</strong> 5+ Types
            </div>
          </div>

          <h4>Documentation:</h4>
          <div class="download-section">
            <a href="imagevideos/Fenceora.pdf" download="Fenceora_Documentation.pdf" class="btn-download-pdf">
              <i class="fas fa-file-pdf"></i> Download PDF Documentation
            </a>
          </div>
        </div>

        <div id="help-tab" class="tab-content">
          <h3>Help & Guidance</h3>
          
          <h4>Getting Started:</h4>
          <ol>
            <li><strong>Connect to ESP32:</strong> Enter your ESP32's IP address in the left corner</li>
            <li><strong>Monitor Sensors:</strong> View real-time data from all connected sensors on the dashboard</li>
            <li><strong>Check Logs:</strong> Review detection and access control events in the log sections</li>
            <li><strong>System Status:</strong> Monitor battery levels and solar power input</li>
          </ol>

          <h4>Common Tasks:</h4>
          <div class="help-task-modal">
            <h5><i class="fas fa-edit"></i> Changing IP Address:</h5>
            <p>Enter IP in the field → Click save (checkmark) or press Enter</p>
          </div>

          <div class="help-task-modal">
            <h5><i class="fas fa-eye"></i> Reading Sensor Data:</h5>
            <p>Each card displays the current sensor value, status, and additional details. Color-coded badges indicate system health.</p>
          </div>

          <div class="help-task-modal">
            <h5><i class="fas fa-list"></i> Understanding Logs:</h5>
            <p>Log entries show timestamp, sensor type, and event details. Most recent events appear at the top.</p>
          </div>

          <h4>Troubleshooting:</h4>
          <ul>
            <li><strong>Can't connect to ESP32:</strong> Verify IP address and ensure ESP32 is powered on and connected to WiFi</li>
            <li><strong>No sensor updates:</strong> Check ESP32 connection and refresh the page</li>
            <li><strong>Incorrect time:</strong> System uses your local time zone automatically</li>
          </ul>

          <div class="help-contact">
            <h4>Need More Help?</h4>
            <p><strong>Development Team:</strong> H^4 HYPERS</p>
            <p><i class="fas fa-envelope"></i> Email: fenceora.h4@gmail.com</p>
          </div>
        </div>

        <div id="code-tab" class="tab-content">
          <h3>ESP32 Testing & Main Codes</h3>
          <p>Individual sensor testing codes and complete Fenceora system code:</p>

          <div class="download-section download-spacing">
            <a href="Fenceora_V3_FIXED.ino" download="Fenceora_V3_FIXED.ino" class="btn-download-code">
              <i class="fas fa-download"></i> Download Complete ESP32 Fenceora Code
            </a>
            <p class="download-note">
              This is the main system code with all sensors integrated.
            </p>
          </div>

          <div class="code-section">
            <h4><i class="fas fa-hand-paper"></i> Test 1: Capacitive Sensor (GPIO 25)</h4>
            <div class="code-block">
              <button class="copy-code-btn" title="Copy code"><i class="fas fa-copy"></i> Copy</button>
              <pre><code>/*
 * CORRECTED Test code for PNP Capacitive Sensor
 * This version adds "debouncing" to prevent delays caused
 * by flooding the serial monitor with noise.
 */

// Use any GPIO pin. Pin 25 is a good choice.
const int SENSOR_PIN = 25; 

// --- Variables for Debouncing ---
int sensorState = LOW;         // The STABLE state we print
int lastReading = LOW;         // The last raw reading from the pin
unsigned long lastDebounceTime = 0; // The last time the pin flickered
unsigned long debounceDelay = 50;   // Wait 50ms to confirm the change
// --------------------------------

void setup() {
  Serial.begin(115200);
  delay(500);
  Serial.println("\n--- CORRECTED Capacitive Sensor Test (Debounced) ---");
  Serial.println("This version will have no delay.");
  Serial.println("Monitoring for electric field...");

  pinMode(SENSOR_PIN, INPUT);
}

void loop() {
  // 1. Read the sensor's current (possibly noisy) state
  int currentReading = digitalRead(SENSOR_PIN);

  // 2. Check if the reading is different from the last raw reading
  //    (This catches the start of any flickers)
  if (currentReading != lastReading) {
    // If it changed, reset the debounce timer
    lastDebounceTime = millis();
  }

  // 3. Wait until the debounce delay (50ms) has passed
  if ((millis() - lastDebounceTime) > debounceDelay) {
    
    // 4. After 50ms, check if this new reading is STABLE
    //    and also different from the last STABLE state we printed.
    if (currentReading != sensorState) {
      sensorState = currentReading; // This is the new, confirmed state
      
      // 5. Print the new, confirmed state ONCE
      if (sensorState == HIGH) {
        Serial.println("--- DETECTED! --- (Electric field or object found)");
      } else {
        Serial.println("Clear (No field detected)");
      }
    }
  }

  // 6. Save the raw reading for the next loop
  lastReading = currentReading;
}</code></pre>
            </div>
          </div>

          <div class="code-section">
            <h4><i class="fas fa-id-card"></i> Test 2: RFID & Servo Motor (SS=5, RST=27, Servo=15)</h4>
            <div class="code-block">
              <button class="copy-code-btn" title="Copy code"><i class="fas fa-copy"></i> Copy</button>
              <pre><code>#include &lt;SPI.h&gt;
#include &lt;MFRC522.h&gt;
#include &lt;ESP32Servo.h&gt;

// === PIN DEFINITIONS ===
#define SERVO_PIN 15
#define RFID_SS_PIN 5   // SDA (SS)
#define RFID_RST_PIN 27 // RST

// === GLOBAL OBJECTS ===
Servo myServo;
MFRC522 rfid(RFID_SS_PIN, RFID_RST_PIN);

// === YOUR MASTER CARD UID ===
byte correctUID[4] = {0xD3, 0x2E, 0xE4, 0x2C}; // &lt;-- UPDATED

// === STATE VARIABLE ===
// We use this to remember if the lock is open or closed
bool isLocked = true;

void setup() {
  Serial.begin(115200);
  SPI.begin();       // Init SPI bus
  rfid.PCD_Init(); // Init MFRC522
  
  // Setup the servo
  ESP32PWM::allocateTimer(0);
  myServo.attach(SERVO_PIN);
  
  // Start in the "locked" position
  myServo.write(0); 
  
  Serial.println("RFID + Servo Toggle Test");
  Serial.println("Scan your master card to toggle the lock (0 &lt;-&gt; 180).");
}

void loop() {
  // 1. Look for a new RFID card
  if ( ! rfid.PICC_IsNewCardPresent()) {
    return; // No card found, exit loop
  }

  // 2. Try to read the card's serial number
  if ( ! rfid.PICC_ReadCardSerial()) {
    return; // Failed to read, exit loop
  }

  Serial.print("Card Scanned. UID: ");
  for (byte i = 0; i &lt; rfid.uid.size; i++) {
    Serial.print(rfid.uid.uidByte[i], HEX);
    Serial.print(" ");
  }
  Serial.println();

  // 3. Check if this is the correct card
  bool uidMatch = true;
  for (byte i = 0; i &lt; rfid.uid.size; i++) {
    if (rfid.uid.uidByte[i] != correctUID[i]) {
      uidMatch = false;
      break;
    }
  }

  // 4. Main Toggle Logic
  if (uidMatch) {
    Serial.println("Access GRANTED.");
    
    // Toggle the state
    if (isLocked) {
      // It's locked, so unlock it
      Serial.println("Unlocking... (Moving to 180)");
      myServo.write(180);
      isLocked = false; // Remember the new state
    } else {
      // It's unlocked, so lock it
      Serial.println("Locking... (Moving to 0)");
      myServo.write(0);
      isLocked = true; // Remember the new state
    }
    
  } else {
    Serial.println("Access DENIED. Wrong card.");
  }

  // 5. Halt the card to allow a new read
  rfid.PICC_HaltA();
  rfid.PCD_StopCrypto1();
  
  // IMPORTANT: Add a delay to prevent the card from
  // being read 100 times in one second.
  delay(1000); 
}</code></pre>
            </div>
          </div>

          <div class="code-section">
            <h4><i class="fas fa-ruler-combined"></i> Test 3: Ultrasonic Sensor (TRIG=33, ECHO=32)</h4>
            <div class="code-block">
              <button class="copy-code-btn" title="Copy code"><i class="fas fa-copy"></i> Copy</button>
              <pre><code>// Define the pins for the Ultrasonic Sensor
const int TRIG_PIN = 33;
const int ECHO_PIN = 32;

// Variables to store duration and distance
long duration;
float distanceCm;

void setup() {
  Serial.begin(115200); // Start serial communication
  
  // Set pin modes
  pinMode(TRIG_PIN, OUTPUT); // Trig pin sends a signal out
  pinMode(ECHO_PIN, INPUT);  // Echo pin reads a signal in
  
  Serial.println("Ultrasonic Sensor Test");
  Serial.println("======================");
  Serial.println("Move your hand in front of the sensor.");
}

void loop() {
  // --- 1. Send the Trigger Pulse ---
  
  // Ensure the trigger pin is low for a clean pulse
  digitalWrite(TRIG_PIN, LOW);
  delayMicroseconds(2);
  
  // Send the 10-microsecond trigger pulse
  digitalWrite(TRIG_PIN, HIGH);
  delayMicroseconds(10);
  digitalWrite(TRIG_PIN, LOW);
  
  // --- 2. Read the Echo ---
  
  // Measure the time the echo pin stays HIGH (the pulse travel time)
  // pulseIn() waits for the pin to go HIGH, times how long it stays
  // HIGH, then waits for it to go LOW.
  duration = pulseIn(ECHO_PIN, HIGH);
  
  // --- 3. Calculate the Distance ---
  
  // Speed of sound = 343 m/s = 0.0343 cm/microsecond
  // The sound travels to the object AND back, so we divide by 2.
  // Distance = (Travel Time * Speed of Sound) / 2
  distanceCm = duration * 0.0343 / 2;

  // --- 4. Print the Result ---
  
  Serial.print("Distance: ");
  Serial.print(distanceCm);
  Serial.println(" cm");

  delay(500); // Wait half a second before the next reading
}</code></pre>
            </div>
          </div>

          <div class="code-section">
            <h4><i class="fas fa-compass"></i> Test 4: RTC & MPU6050 (I2C SDA=21, SCL=22)</h4>
            <div class="code-block">
              <button class="copy-code-btn" title="Copy code"><i class="fas fa-copy"></i> Copy</button>
              <pre><code>#include &lt;Wire.h&gt;
#include &lt;RTClib.h&gt;
#include &lt;Adafruit_MPU6050.h&gt;
#include &lt;Adafruit_Sensor.h&gt;

// --- Create objects for both I2C sensors ---
RTC_DS3231 rtc;
Adafruit_MPU6050 mpu;

// --- Define your custom I2C pins ---
#define I2C_SDA_PIN 21
#define I2C_SCL_PIN 22

void setup() {
  Serial.begin(115200);
  while (!Serial) {
    delay(10); // Wait for serial console
  }
  Serial.println("\n--- Combined RTC + MPU-6050 (Addr 0x69) Test ---");

  // --- 1. Initialize the I2C Bus ---
  // Start Wire on your specific pins
  Wire.begin(I2C_SDA_PIN, I2C_SCL_PIN);

  // --- 2. Initialize the RTC ---
  // The rtc.begin() function will find the RTC at its default address (0x68)
  if (!rtc.begin()) {
    Serial.println("***********************************");
    Serial.println("Couldn't find RTC! Check wiring.");
    Serial.println("***********************************");
    while (1) delay(10);
  }
  Serial.println("RTC Found!");

  // --- 3. Initialize the MPU-6050 ---
  // We MUST tell the library to look for the MPU at address 0x69
  // (because you connected AD0 to 3.3V)
  if (!mpu.begin(0x69)) { 
    Serial.println("***********************************");
    Serial.println("Failed to find MPU6050 chip at address 0x69.");
    Serial.println("Check AD0 pin (must be connected to 3.3V).");
    Serial.println("***********************************");
    while (1) delay(10);
  }
  Serial.println("MPU-6050 Found at 0x69!");

  // --- 4. Set the time (only runs if needed) ---
  if (rtc.lostPower()) {
    Serial.println("RTC lost power, setting the time!");
    // Sets the time to the time this sketch was compiled
    rtc.adjust(DateTime(F(__DATE__), F(__TIME__)));
  }
  
  Serial.println("\n--- Starting Data Loop ---");
}

void loop() {
  
  // --- PART 1: Read from RTC (at address 0x68) ---
  DateTime now = rtc.now();
  Serial.print(now.year());
  Serial.print('/');
  Serial.print(now.month());
  Serial.print('/');
  Serial.print(now.day());
  Serial.print(" ");
  if (now.hour() &lt; 10) Serial.print('0');
  Serial.print(now.hour());
  Serial.print(':');
  if (now.minute() &lt; 10) Serial.print('0');
  Serial.print(now.minute());
  Serial.print(':');
  if (now.second() &lt; 10) Serial.print('0');
  Serial.print(now.second());
  Serial.print("  |  "); // Separator

  // --- PART 2: Read from MPU-6050 (at address 0x69) ---
  sensors_event_t a, g, temp;
  mpu.getEvent(&a, &g, &temp);

  Serial.print("Accel X: ");
  Serial.print(a.acceleration.x, 1); // Print with 1 decimal place
  Serial.print(", Y: ");
  Serial.print(a.acceleration.y, 1);
  Serial.print(", Z: ");
  Serial.print(a.acceleration.z, 1);
  Serial.println(" m/s^2");

  delay(1000); // Wait one second
}</code></pre>
            </div>
          </div>
        </div>

        <!-- ========== SCILAB EXPERIMENTS TAB - TEMPORARY SECTION (CAN BE REMOVED EASILY) ========== -->
        <div id="scilab-tab" class="tab-content">
          <h3>Scilab Mathematical Experiments</h3>
          <p class="scilab-warning">
            <i class="fas fa-exclamation-triangle"></i> Note: This section contains experimental mathematical codes and can be removed when not needed.
          </p>

          <!-- Experiment 1 -->
          <div class="code-section">
            <h4><i class="fas fa-wave-square"></i> Experiment 1: Fourier Series (Linear Function)</h4>
            <div class="code-block">
              <button class="copy-code-btn" title="Copy code"><i class="fas fa-copy"></i> Copy</button>
              <pre><code>//Caption: Fourier Series
clear;
clc;
//Function for Fourier Series
funcprot(0);
function [a0, A, B]=fourierplot(l, n, f)
 clf();
 a0=1/l*intg(0,2*l,f,0.000000001);
 for i=1:n
 function b=f1(x, f)
 b=f(x)*cos(i*%pi*x/l);
 endfunction
 function c=f2(x, f)
 c=f(x)*sin(i*%pi*x/l);
 endfunction
 A(i)=1/l*intg(0,2*l,f1,0.000000001);
 B(i)=1/l*intg(0,2*l,f2,0.000000001);
 end
 function series=solution(x)
 series=a0/2;
 for i=1:n
 series=series+A(i)*cos(i*%pi*x/l)+B(i)*sin(i*%pi*x/l);
 end
 endfunction
 x=-10*1:0.1:10*1;
 plot(x,solution(x));
endfunction
//Main Program
deff('a=f(x)','a=x');
[a0,A,B]=fourierplot(%pi,100,f)
//result</code></pre>
            </div>
          </div>

          <!-- Experiment 2 -->
          <div class="code-section">
            <h4><i class="fas fa-wave-square"></i> Experiment 2: Fourier Series (Exponential Function)</h4>
            <div class="code-block">
              <button class="copy-code-btn" title="Copy code"><i class="fas fa-copy"></i> Copy</button>
              <pre><code>//Caption: Fourier Series
clear;
clc;
//function for Fourier Series
funcprot(0);
function [a0, A, B]= fourierplot(l, n, f)
 clf();
 a0=1/l*intg(-1,1,f,0.00000001);
 for i=1:n
 function b=f1(x,f)
 b=f(x)*cos(i*%pi*x/l);
 endfunction
 function c=f2(x,f)
 c=f(x)*sin(i*%pi*x/l);
 endfunction
 A(i)=1/l*intg(-1,1,f1,0.00000001);
 B(i)=1/l*intg(-1,1,f2,0.00000001);
 end
 function series=solution(x)
 series=a0/2;
 for i=1:n
 series=series+A(i)*cos(i*%pi*x/l)+B(i)*sin(i*%pi*x/l);
 end
 endfunction
 x=-.5*1:0.1:5*1;
 plot(x,solution(x));
endfunction
//Main Program
deff('a=f(x)','a=exp(-x)');
[a0,A,B]=fourierplot(2,100,f)
//result</code></pre>
            </div>
          </div>

          <!-- Experiment 3 -->
          <div class="code-section">
            <h4><i class="fas fa-bezier-curve"></i> Experiment 3: Fourier Transform (Exponential)</h4>
            <div class="code-block">
              <button class="copy-code-btn" title="Copy code"><i class="fas fa-copy"></i> Copy</button>
              <pre><code>//Caption: Fourier Transform
clear;
clc;
//function for Fourier Transform
funcprot(0);
function FT= fouriertransform(a, b, s, f)
 function F=f1(x,f)
 F=f(x)*exp(sqrt(-1)*s*x);
 endfunction
 FT=(1/sqrt(2*%pi))*intg(a,b,f1,.00000001);
 disp('Fourier Transform =',FT)
 //x=a:0.1:b;
endfunction
//main program
deff('a=f(x)', 'a=exp(x)');
FT=fouriertransform(1,2,100,f)
//Here s=100 radians, lower limit a=1, upper limit b=2</code></pre>
            </div>
          </div>

          <!-- Experiment 4 -->
          <div class="code-section">
            <h4><i class="fas fa-bezier-curve"></i> Experiment 4: Fourier Transform (Cosine)</h4>
            <div class="code-block">
              <button class="copy-code-btn" title="Copy code"><i class="fas fa-copy"></i> Copy</button>
              <pre><code>//Caption: Fourier Transform
clear;
clc;
//function for Fourier Transform
funcprot(0);
function FT=fouriertransform(a, b, s, f)
 function F=f1(x, f)
 F=f(x)*exp(sqrt(-1)*s*x);
 endfunction
 FT=(1/sqrt(2*%pi))*intg(a,b,f1,.00000001);
 disp('Fourier Transform =',FT)
 //x=a:0.1:b;
endfunction
//main program
deff('a=f(x)','a=cos(x)');
FT=fouriertransform(-%pi/2,%pi/2,100,f);
//Here s=100 radians, lower limit a=1, upper limit b=2</code></pre>
            </div>
          </div>

          <!-- Experiment 5 -->
          <div class="code-section">
            <h4><i class="fas fa-water"></i> Experiment 5: One Dimensional Wave Equation</h4>
            <div class="code-block">
              <button class="copy-code-btn" title="Copy code"><i class="fas fa-copy"></i> Copy</button>
              <pre><code>//One Dimensional Wave Equation
clear;
clc;
n=1:2:100;
l=5;//distance =5
x = 3; //in between 0 to l
k = 2; //spring constant
t = 0.5;//t=0.5 seconds
a=1;//constant =1
sinx = sin(n*%pi*x/l);
cosx = cos(n*%pi*a*t/l);
I = sinx.*cosx;
N = n.^3;
I = I./N
z = sum(I);
y =((8*k*(l^2))/(%pi^3))*z //Final Solution
disp("Solution of one dimensional wave equation is : y(3,0.5)=",y)</code></pre>
            </div>
          </div>

          <!-- Experiment 6 -->
          <div class="code-section">
            <h4><i class="fas fa-thermometer-half"></i> Experiment 6: One Dimensional Heat Equation</h4>
            <div class="code-block">
              <button class="copy-code-btn" title="Copy code"><i class="fas fa-copy"></i> Copy</button>
              <pre><code>//One Dimensional Heat Equation
clear;
clc;
l=5;//length of the rod=5
x=3;//in between 0 to 5
t=0.5;//time=0.5 seconds
alpha=1;//constant=1
//cosx=cos(n*%pi*x/l);
//expt=-(alpha^2)*(n^2)*(%pi^2)*t/(l^2);
//temp=-4*(l^2)/((%pi^3))
u=(l^2)/6;
for n=2:2:100
 u=u+(-4*(l^2)/((%pi^2)*(n^2)))*cos(n*%pi*x/l)*exp(-(alpha^2)*(n^2)*(%pi^2)*t/(l^2));
end
disp('One Dimensional Heat Equation Final Solution u(3,0.5)=',u)</code></pre>
            </div>
          </div>

          <!-- Experiment 7 -->
          <div class="code-section">
            <h4><i class="fas fa-function"></i> Experiment 7: Z-Transform of Finite Discrete Sequence</h4>
            <div class="code-block">
              <button class="copy-code-btn" title="Copy code"><i class="fas fa-copy"></i> Copy</button>
              <pre><code>//caption: Find the z-transform of a finite discrete sequence
clear all;
clc;
x=[1,0,3,-1,2]
//input discrete sequence
z=poly(0,'z');
disp('z-transform of a finite discrete sequence X(z)=')
for n=0:length(x)-1
 XZ(n+1)=x(n+1)*(1/z)^n;
 disp(XZ(n+1))
end
//result</code></pre>
            </div>
          </div>

          <!-- Experiment 8 -->
          <div class="code-section">
            <h4><i class="fas fa-divide"></i> Experiment 8: Partial Fraction Decomposition</h4>
            <div class="code-block">
              <button class="copy-code-btn" title="Copy code"><i class="fas fa-copy"></i> Copy</button>
              <pre><code>//Caption: Program to perform partial fraction
clear;
clc;
z = poly(0,'z');
X = pfss(1/(1-3.5*z^-1+3*z^-2));
XZ1 = syslin('d',X(1))
XZ2 = syslin('d',X(2))
disp("Partial Fraction Result is")
disp('X1(z)=',XZ1)
disp('X2(z)=',XZ2)</code></pre>
            </div>
          </div>

          <!-- Experiment 9a -->
          <div class="code-section">
            <h4><i class="fas fa-dice"></i> Experiment 9a: Binomial Distribution</h4>
            <div class="code-block">
              <button class="copy-code-btn" title="Copy code"><i class="fas fa-copy"></i> Copy</button>
              <pre><code>//Binomial Distribution
//first example
clear;
clc;
n=6//6dices
p=1/3;//probability of getting 5 or 6 p=2/6=1/3
pr_k=binomial(p,n)
disp(binomial(p,n))
disp("Probability of getting 3 dice to show 5 or 6",sum(pr_k(4:7)))
//6 dices thrown729 times
n1=729
pr_3=n1*sum(pr_k(4:7))
disp("Atleast 3 dice to show 5 or 6",pr_3)
//Result</code></pre>
            </div>
          </div>

          <!-- Experiment 9b -->
          <div class="code-section">
            <h4><i class="fas fa-chart-line"></i> Experiment 9b: Poisson Distribution</h4>
            <div class="code-block">
              <button class="copy-code-btn" title="Copy code"><i class="fas fa-copy"></i> Copy</button>
              <pre><code>//Poisson Distribution
clear;
clc;
Mean_Lambda = input("Enter Mean value");
//case 1: Exactly 2 messages arrive within 1 hour
x =2;
Px = exp(-Mean_Lambda)*((Mean_Lambda)^x)/factorial(x);
disp('Probability of exactly 2 messages arrive=',Px);
//case 2: no messages arrive x=0
x=0;
Px = exp(-Mean_Lambda)*((Mean_Lambda)^x)/factorial(x);
disp('Probability of no messages arrive=',Px);
//Probability of atleast 3 messages arrive in 1 hour
Px3=0
for x=0:2
 Px3 = Px3+exp(-Mean_Lambda)*((Mean_Lambda)^x)/factorial(x);
end
Px = 1-Px3
disp('Probability of atleast 3 messages arrive in 1 hour',Px)</code></pre>
            </div>
          </div>

          <!-- Experiment 10 -->
          <div class="code-section">
            <h4><i class="fas fa-bell-curve"></i> Experiment 10: Normal Distribution</h4>
            <div class="code-block">
              <button class="copy-code-btn" title="Copy code"><i class="fas fa-copy"></i> Copy</button>
              <pre><code>//Normal Distribution
clear;
clc;
X=834
Mean = 800
Std = 40
//Case 1 Probability that a bulb burns more than 834 hours
[P,Q]=cdfnor("PQ",X,Mean,Std);
//P = probability that a bulb less than 834 hours
//Q = Probability that a bulb more than 834 hours
disp("probability that a bulb less than 834 hours",P)
disp("Probability that a bulb more than 834 hours",Q)
//Case 2 probility that bulb burns between 778 and 834 hours
//P[778<X<834]
X1=778
X2=834
[P1,Q1]=cdfnor("PQ",X1,Mean,Std)
[P2,Q2]=cdfnor("PQ",X2,Mean,Std)
//P1=probability that a bulb less than 778
//Q1=robability that a bulb burns more than 778
//P2 = robability that a bulb burns less than 834
//Q2 = robability that a bulb burns more than 834
P = (0.5-P1)+(P2-0.5)
disp("P[0<Z<778]",0.5-P1)
disp("P[0<Z<834]",P2-0.5)
disp("probility that bulb burns between 778 and 834 hours",P)
//Result</code></pre>
            </div>
          </div>

          <div class="scilab-info-box">
            <h4 class="scilab-info-title">
              <i class="fas fa-info-circle"></i> About These Experiments
            </h4>
            <p class="info-text">
              These Scilab codes demonstrate various mathematical concepts including:
            </p>
            <ul class="info-list">
              <li>Fourier Series & Transform analysis</li>
              <li>Wave & Heat equation solutions</li>
              <li>Z-Transform & Signal processing</li>
              <li>Statistical distributions (Binomial, Poisson, Normal)</li>
            </ul>
            <p class="info-note">
              <strong>Note:</strong> This entire "Scilab Experiments" tab can be easily removed when no longer needed by simply deleting the tab button and tab content section.
            </p>
          </div>
        </div>
        <!-- ========== END OF SCILAB EXPERIMENTS SECTION ========== -->
      </div>
    </div>
  </div>

  <!-- Notification Modal -->
  <div id="notificationModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2><i class="fas fa-bell"></i> Notifications</h2>
        <button class="modal-close" id="closeNotification">&times;</button>
      </div>
      <div class="modal-body">
        <div class="notification-item unread">
          <div class="notification-icon alert">
            <i class="fas fa-exclamation-triangle"></i>
          </div>
          <div class="notification-content">
            <h4>Proximity Alert</h4>
            <p>Object detected too close at Zone A</p>
            <span class="notification-time">2 minutes ago</span>
          </div>
        </div>
        <div class="notification-item unread">
          <div class="notification-icon warning">
            <i class="fas fa-temperature-high"></i>
          </div>
          <div class="notification-content">
            <h4>Temperature Warning</h4>
            <p>Temperature elevated to 32°C</p>
            <span class="notification-time">15 minutes ago</span>
          </div>
        </div>
        <div class="notification-item unread">
          <div class="notification-icon success">
            <i class="fas fa-check-circle"></i>
          </div>
          <div class="notification-content">
            <h4>System Update</h4>
            <p>All sensors functioning normally</p>
            <span class="notification-time">1 hour ago</span>
          </div>
        </div>
        <div class="notification-item">
          <div class="notification-icon info">
            <i class="fas fa-info-circle"></i>
          </div>
          <div class="notification-content">
            <h4>Battery Status</h4>
            <p>Battery charged to 85%</p>
            <span class="notification-time">3 hours ago</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settingsModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2><i class="fas fa-cog"></i> Settings</h2>
        <button class="modal-close" id="closeSettings">&times;</button>
      </div>
      <div class="modal-body">
        <div class="settings-section">
          <h3>Display Settings</h3>
          <div class="setting-item">
            <label for="refreshRate">Data Refresh Rate:</label>
            <select id="refreshRate">
              <option value="3000">3 seconds</option>
              <option value="5000" selected>5 seconds</option>
              <option value="10000">10 seconds</option>
            </select>
          </div>
          <div class="setting-item">
            <label for="theme">Theme:</label>
            <select id="theme">
              <option value="dark" selected>Dark Mode</option>
              <option value="light">Light Mode</option>
            </select>
          </div>
        </div>

        <div class="settings-section">
          <h3>Notification Settings</h3>
          <div class="setting-item checkbox">
            <input type="checkbox" id="enableNotifications" checked>
            <label for="enableNotifications">Enable Notifications</label>
          </div>
          <div class="setting-item checkbox">
            <input type="checkbox" id="soundAlerts" checked>
            <label for="soundAlerts">Sound Alerts</label>
          </div>
          <div class="setting-item checkbox">
            <input type="checkbox" id="emailNotifications" checked>
            <label for="emailNotifications">Email Notifications</label>
          </div>
          
          <!-- Email Test Section -->
          <div class="email-test-section" id="emailTestSection">
            <div class="email-test-header">
              <i class="fas fa-envelope-open-text"></i>
              <h4>Test Email Notification</h4>
            </div>
            <p class="email-test-description">Test the email notification system independently. Click the button below to send a test email to all receivers. No ESP32 connection required! Available every 30 seconds.</p>
            <button class="btn-test-email" id="testEmailBtn">
              <i class="fas fa-paper-plane"></i>
              <span id="testEmailText">Send Test Email</span>
            </button>
            <div class="email-test-timer" id="emailTestTimer">
              <i class="fas fa-clock"></i>
              <span>Next test available in: <strong id="timerCountdown">30</strong> seconds</span>
            </div>
            <div class="email-test-status" id="emailTestStatus">
              <i class="fas fa-check-circle"></i>
              <span id="emailStatusText">Test email sent successfully!</span>
            </div>
          </div>
        </div>

        <div class="settings-section">
          <h3>System Settings</h3>
          <div class="setting-item">
            <label for="timeFormat">Time Format:</label>
            <select id="timeFormat">
              <option value="12">12 Hour</option>
              <option value="24" selected>24 Hour</option>
            </select>
          </div>
          <div class="setting-item">
            <label for="tempUnit">Temperature Unit:</label>
            <select id="tempUnit">
              <option value="C" selected>Celsius (°C)</option>
              <option value="F">Fahrenheit (°F)</option>
            </select>
          </div>
          <div class="setting-item">
            <label for="language">Language:</label>
            <select id="language">
              <option value="en" selected>English</option>
              <option value="ta">தமிழ் (Tamil)</option>
            </select>
          </div>
        </div>

        <div class="settings-actions">
          <button class="btn-save"><i class="fas fa-save"></i> Save Settings</button>
          <button class="btn-reset"><i class="fas fa-undo"></i> Reset to Default</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Floating Action Button (Right Side) -->
  <div class="floating-actions">
    <button class="floating-btn feedback-btn" id="feedbackBtn" title="Send Feedback">
      <div class="feedback-emoji-container">
        <!-- Yellow Smiley Face -->
        <div class="emoji-circle">
          <div class="emoji-face-inner">
            <!-- Eyes -->
            <div class="emoji-eyes">
              <div class="emoji-eye left-eye">
                <div class="emoji-pupil"></div>
                <div class="eye-shine"></div>
              </div>
              <div class="emoji-eye right-eye">
                <div class="emoji-pupil"></div>
                <div class="eye-shine"></div>
              </div>
            </div>
            <!-- Big Smile -->
            <div class="emoji-big-smile">
              <div class="smile-inner"></div>
            </div>
          </div>
        </div>
        <!-- Speech Bubble -->
        <div class="speech-bubble">
          <div class="bubble-lines">
            <span class="bubble-line line-1"></span>
            <span class="bubble-line line-2"></span>
            <span class="bubble-line line-3"></span>
          </div>
          <div class="bubble-tail"></div>
        </div>
      </div>
    </button>
  </div>

  <!-- Feedback Modal -->
  <div class="modal" id="feedbackModal">
    <div class="modal-content feedback-modal-content">
      <div class="modal-header">
        <h2><i class="fas fa-comment-dots"></i> Send Feedback</h2>
        <span class="close-modal" id="closeFeedbackModal">&times;</span>
      </div>
      <div class="modal-body">
        <p class="feedback-description">We'd love to hear from you! Share your thoughts, suggestions, or report issues.</p>
        <form id="feedbackForm">
          <div class="form-group">
            <label for="feedbackName">Your Name</label>
            <input type="text" id="feedbackName" placeholder="Enter your name" required>
          </div>
          <div class="form-group">
            <label for="feedbackEmail">Your Email</label>
            <input type="email" id="feedbackEmail" placeholder="your.email@example.com" required>
          </div>
          <div class="form-group">
            <label for="feedbackType">Feedback Type</label>
            <select id="feedbackType" required>
              <option value="">Select type...</option>
              <option value="Suggestion">💡 Suggestion</option>
              <option value="Bug Report">🐛 Bug Report</option>
              <option value="Feature Request">✨ Feature Request</option>
              <option value="Compliment">👍 Compliment</option>
              <option value="Other">📝 Other</option>
            </select>
          </div>
          <div class="form-group">
            <label for="feedbackMessage">Message</label>
            <textarea id="feedbackMessage" rows="6" placeholder="Tell us what's on your mind..." required></textarea>
          </div>
          <div class="feedback-actions">
            <button type="submit" class="btn-submit-feedback">
              <i class="fas fa-paper-plane"></i> Send Feedback
            </button>
            <button type="button" class="btn-cancel-feedback" id="cancelFeedback">
              Cancel
            </button>
          </div>
        </form>
        <div class="feedback-status" id="feedbackStatus">
          <i class="fas fa-check-circle"></i>
          <span id="feedbackStatusText">Feedback sent successfully!</span>
        </div>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
